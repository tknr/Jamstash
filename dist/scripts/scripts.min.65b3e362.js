function authenticationInterceptor(s,n,t,o){return{request:function(e){s.loggedIn=!1,""!=o.settings.Username&&""!=o.settings.Password&&""!=o.settings.Server&&(s.loggedIn=!0);var t="",t=n.path();return o.settings.Debug&&console.log("Logged In: "+s.loggedIn),o.settings.Debug&&console.log("Current Path: "+t),!s.loggedIn&&"/settings"!=t&&t.search("archive")<0&&n.path("/settings"),e},responseError:function(e){return 401===e.status&&"/settings"!=n.path()&&(s.loggedIn=!1,n.path("/settings")),t.reject(e)}}}function loadingInterceptor(t){return{request:function(e){return t.isLoading=!0,e},response:function(e){return t.isLoading=!1,e},responseError:function(e){return t.isLoading=!1,e}}}function lockerConfig(e){e.defaults({driver:"local",namespace:!1,eventsEnabled:!1})}function persistenceService(o,t,s,i,r,e,a,l){let n="CurrentSong",u="CurrentQueue",c="Volume",d="MusicFolders",g="GenrePlaylists",f="Settings",m="JamstashVersion";var p=this;o.extend(p,{loadTrackPosition:function(){var e=r.get(n);e&&s.load(e);t.settings.Debug&&console.log("Current Position Loaded from localStorage: ",e)},saveTrackPosition:function(e){r.put(n,e),t.settings.Debug&&console.log("Saving Current Position: ",e)},deleteTrackPosition:function(){r.forget(n),t.settings.Debug&&console.log("Removing Current Position from localStorage")},loadQueue:function(){var e=r.get(u);e&&(s.addSongs(e),0<s.queue.length&&i.updateMessage(s.queue.length+" Saved Song(s)",!0),t.settings.Debug)&&console.log("Play Queue Loaded from localStorage: "+s.queue.length+" song(s)")},saveQueue:function(){r.put(u,s.queue),t.settings.Debug&&console.log("Saving Queue: "+s.queue.length+" songs")},deleteQueue:function(){r.forget(u),t.settings.Debug&&console.log("Removing Play Queue from localStorage")},getVolume:function(){var e=r.get(c);void 0===e&&(r.put(c,1),e=1);return e},saveVolume:function(e){r.put(c,e)},deleteVolume:function(){r.forget(c)},getSelectedMusicFolder:function(){return r.get(d)},saveSelectedMusicFolder:function(e){r.put(d,e)},deleteSelectedMusicFolder:function(){r.forget(d)},saveSelectedGenreNames:function(e){r.put(g,e)},loadSelectedGenreNames:function(){var e=r.get(g);void 0===e&&(e=[]);return e},deleteSelectedGenreNames:function(){r.forget(g)},getSettings:function(){var t=p.getVersion();return e.getChangeLog(function(e){e=e[0].version;l.checkVersionNewer(e,t)&&p.upgradeVersion(t,e)}),r.get(f)},saveSettings:function(e){r.put(f,e)},deleteSettings:function(){r.forget(f)},getVersion:function(){return r.get(m)},upgradeVersion:function(s,n){var t=r.get(f),e=o.filter(a.versions,function(e){var t=l.checkVersion(n,e.version),e=l.checkVersionNewer(e.version,s);return t&&e});o.forEach(e,function(e){e.changeset(t)}),p.saveSettings(t),r.put(m,n),i.updateMessage("Version "+s+" to "+n,!0)}})}function SelectedSongs(s){var n=this,o=(s.extend(n,{add:function(e){return e.selected=!0,o.push(e),o=s.uniq(o),n},addSongs:function(e){return s.forEach(e,function(e){e.selected=!0}),o=s.union(o,e),n},get:function(){return o},remove:function(t){var e=s(o).remove(function(e){return e===t}).first();return s.set(e,"selected",!1),n},reset:function(){return s.forEach(o,function(e){e.selected=!1}),o=[],n},toggle:function(e){e.selected?n.remove(e):n.add(e);return n}}),[])}function subsonicService(o,i,r,a,l){var u=this,n=(r.extend(u,{addToPlaylist:function(e,t){t=r.pluck(t,"id");return u.subsonicRequest("updatePlaylist.view",{params:{playlistId:e,songIdToAdd:t}})},deletePlaylist:function(e){return u.subsonicRequest("deletePlaylist.view",{params:{id:e}})},getAlbumByTag:function(e){var s=i.defer();return $.ajax({url:a.BaseURL()+"/getAlbum.view?"+a.BaseParams()+"&id="+e,method:"GET",dataType:a.settings.Protocol,timeout:a.settings.Timeout,success:function(e){var t;void 0!==e["subsonic-response"].album&&(n.album=[],n.song=[],t=[],0<e["subsonic-response"].album.song.length?t=e["subsonic-response"].album.song:t[0]=e["subsonic-response"].album.song,angular.forEach(t,function(e,t){n.song.push(l.mapSong(e))})),s.resolve(n)}}),s.promise},getAlbumListBy:function(e,t){var t=0<t?t:0,s={reason:"No matching albums found on the Subsonic server."},e={size:a.settings.AutoAlbumSize,type:e,offset:t};return u.subsonicRequest("getAlbumList.view",{params:e}).then(function(e){if(void 0!==e.albumList.album){e=[].concat(e.albumList.album);if(0<e.length)return l.mapAlbums(e)}return i.reject(s)})},getArtists:function(e){var t,s={reason:"No artist found on the Subsonic server."};isNaN(e)||(t={musicFolderId:e});return u.subsonicRequest("getIndexes.view",{cache:!0,params:t}).then(function(e){var t;return void 0===e.indexes||void 0===e.indexes.index&&void 0===e.indexes.shortcut?i.reject(s):((t={}).shortcut=[].concat(e.indexes.shortcut),t.index=[].concat(e.indexes.index),r.map(t.index,function(e){var t=e;return t.artist=[].concat(e.artist),t}),t)})},getGenres:function(){var s={reason:"No genre found on the Subsonic server."};return u.subsonicRequest("getGenres.view").then(function(e){if(void 0!==e.genres&&void 0!==e.genres.genre){var t,e=[].concat(e.genres.genre);if(0<e.length)return e[0].value?t=r.pluck(e,"value"):e[0].content&&(t=r.pluck(e,"content")),t}return i.reject(s)})},getMusicFolders:function(){var t={reason:"No music folder found on the Subsonic server."};return u.subsonicRequest("getMusicFolders.view",{cache:!0}).then(function(e){return void 0!==e.musicFolders&&void 0!==e.musicFolders.musicFolder?[].concat(e.musicFolders.musicFolder):i.reject(t)})},getPlaylist:function(e){var t={reason:"This playlist is empty."};return u.subsonicRequest("getPlaylist.view",{params:{id:e}}).then(function(e){if(void 0!==e.playlist.entry){e=[].concat(e.playlist.entry);if(0<e.length)return l.mapSongs(e)}return i.reject(t)})},getPlaylists:function(){var t={reason:"No playlist found on the Subsonic server."};return u.subsonicRequest("getPlaylists.view").then(function(e){if(void 0!==e.playlists.playlist){var e=[].concat(e.playlists.playlist);if(0<e.length)return{playlists:(e=r.partition(e,function(e){return e.owner===a.settings.Username}))[0],playlistsPublic:e[1]}}return i.reject(t)})},getPodcast:function(t){var s={reason:"This podcast was not found on the Subsonic server."};return u.subsonicRequest("getPodcasts.view",{params:{id:t,includeEpisodes:!0}}).then(function(e){if(void 0!==e.podcasts.channel){e=[].concat(e.podcasts.channel);if(0<e.length){var e=e[0];if(null!==e&&e.id===t)return e=[].concat(e.episode),0<(e=r.filter(e,function(e){return"completed"===e.status})).length?l.mapPodcasts(e):i.reject({reason:"No downloaded episode found for this podcast. Please check the podcast settings."})}}return i.reject(s)})},getPodcasts:function(){var t={reason:"No podcast found on the Subsonic server."};return u.subsonicRequest("getPodcasts.view",{params:{includeEpisodes:!1}}).then(function(e){if(void 0!==e.podcasts&&void 0!==e.podcasts.channel){e=[].concat(e.podcasts.channel);if(0<e.length)return e}return i.reject(t)})},getRandomSongs:function(e,t){var s={reason:"No songs found on the Subsonic server."},n={size:a.settings.AutoPlaylistSize};void 0!==e&&""!==e&&"Random"!==e&&(n.genre=e);isNaN(t)||(n.musicFolderId=t);return u.subsonicRequest("getRandomSongs.view",{params:n}).then(function(e){if(void 0!==e.randomSongs){e=[].concat(e.randomSongs.song);if(0<e.length)return l.mapSongs(e)}return i.reject(s)})},getRandomStarredSongs:function(){return u.getStarred().then(function(e){if(void 0!==e.song){var e=[].concat(e.song);if(0<e.length)return e=[].concat(r.sample(e,a.settings.AutoPlaylistSize)),l.mapSongs(e)}return i.reject({reason:"No starred songs found on the Subsonic server."})})},getDirectory:function(e){var t={reason:"This directory is empty."};return u.subsonicRequest("getMusicDirectory.view",{params:{id:e}}).then(function(e){if(void 0!==e.directory.child){var e=[].concat(e.directory.child);if(0<e.length)return e=r.partition(e,function(e){return e.isDir}),{directories:l.mapAlbums(e[0]),songs:l.mapSongs(e[1])}}return i.reject(t)})},getStarred:function(){return u.subsonicRequest("getStarred.view",{cache:!0}).then(function(e){return angular.equals(e.starred,{})?i.reject({reason:"Nothing is starred on the Subsonic server."}):e.starred})},newPlaylist:function(e){return u.subsonicRequest("createPlaylist.view",{params:{name:e}})},ping:function(){return u.subsonicRequest("ping.view")},recursiveGetDirectory:function(e){var o=i.defer();return u.getDirectory(e).then(function(e){var t,s=e.directories,n=e.songs;0===s.length?o.resolve(n):(t=[],angular.forEach(s,function(e){e=u.recursiveGetDirectory(e.id).then(function(e){return n.concat(e)});t.push(e)}),e=i.all(t).then(function(e){return r.flatten(e)}),o.resolve(e))},function(){o.resolve([])}),o.promise},savePlaylist:function(e,t){t=r.pluck(t,"id");return u.subsonicRequest("createPlaylist.view",{params:{playlistId:e,songId:t}})},scrobble:function(e){return u.subsonicRequest("scrobble.view",{params:{id:e.id,submission:!0}}).then(function(){return a.settings.Debug&&console.log("Successfully scrobbled song: "+e.id),!0})},search:function(e,s){return r([0,1,2]).contains(s)?u.subsonicRequest("search2.view",{params:{query:e}}).then(function(e){var t;if(r.isEmpty(e.searchResult2)?r.isEmpty(e.search2)||(t=e.search2):t=e.searchResult2,!r.isEmpty(t))switch(s){case 0:if(void 0!==t.song)return l.mapSongs([].concat(t.song));break;case 1:if(void 0!==t.album)return l.mapAlbums([].concat(t.album));break;case 2:if(void 0!==t.artist)return[].concat(t.artist)}return i.reject({reason:"No results."})}):i.reject({reason:"Wrong search type."})},subsonicRequest:function(e,t){var s={reason:"Error when contacting the Subsonic server."},n=i.defer(),e="/"===e.charAt(0)?e:"/"+e,e=a.BaseURL()+e,t=t||{};t.params=t.params||{},r.extend(t.params,{u:a.settings.Username,p:a.settings.Password,f:a.settings.Protocol,v:a.settings.ApiVersion,c:a.settings.ApplicationName}),t.timeout=a.settings.Timeout,e="jsonp"===a.settings.Protocol?(t.params.callback="JSON_CALLBACK",o.jsonp(e,t)):o.get(e,t);return e.success(function(e){e=e&&void 0!==e&&void 0!==e["subsonic-response"]?e["subsonic-response"]:{status:"failed"};"ok"===e.status?n.resolve(e):("failed"===e.status&&void 0!==e.error&&(s.subsonicError=e.error,s.version=e.version),n.reject(s))}).error(function(e,t){s.httpError=t,n.reject(s)}),n.promise},toggleStar:function(e){var t=e.starred?"unstar.view":"star.view";return u.subsonicRequest(t,{params:{id:e.id}}).then(function(){return!e.starred})},addToJukebox:function(e){a.settings.Debug&&console.log("Load Jukebox");return u.subsonicRequest("jukeboxControl.view",{params:{action:"set",id:e.id}}).then(function(){u.sendToJukebox("start")})},sendToJukebox:function(e){a.settings.Debug&&console.log("Send Jukebox "+e);return u.subsonicRequest("jukeboxControl.view",{params:{action:e}})}}),{album:[],song:[],playlists:[],breadcrumb:[],playlistsPublic:[],playlistsGenre:a.SavedGenres,selectedAutoAlbum:null,selectedArtist:null,selectedAlbum:null,selectedPlaylist:null,selectedAutoPlaylist:null,selectedGenre:null,selectedPodcast:null})}function QueueController(e,t,s,n,o,i){t.extend(this,{player:s,emptyQueue:function(){s.emptyQueue(),$.fancybox.close()},isPlayingSong:function(e){return angular.equals(e,s.getPlayingSong())},playSong:s.play,removeSelectedSongsFromQueue:function(){s.removeSongs(n.get())},removeSongFromQueue:s.removeSong,selectAll:function(){t.every(s.queue,"selected")?n.reset():n.addSongs(s.queue)},shuffleQueue:function(){s.shuffleQueue(),$("#SideBar").stop().scrollTo(".header",400)},toggleSelection:n.toggle,toggleStar:function(t){return o.toggleStar(t).then(function(e){t.starred=e,i.updateMessage("Favorite Updated!",!0)})}}),e.$watch(function(){return s.getPlayingSong()},function(e){void 0!==e&&$("#SideBar").stop().scrollTo(".song.id"+e.id,400)})}angular.module("JamStash",["ngCookies","ngRoute","ngSanitize","ngLodash","jamstash.subsonic.controller","jamstash.archive.controller","jamstash.player.controller","jamstash.queue.controller","jamstash.settings.controller","jamstash.persistence","jamstash.loading"]).config(["$routeProvider",function(e){e.when("/index",{redirectTo:"/library"}).when("/settings",{templateUrl:"settings/settings.html",controller:"SettingsController"}).when("/library",{templateUrl:"subsonic/subsonic.html",controller:"SubsonicController"}).when("/library/:artistId",{templateUrl:"subsonic/subsonic.html",controller:"SubsonicController",reloadOnSearch:!1}).when("/library/:artistId/:albumId",{templateUrl:"subsonic/subsonic.html",controller:"SubsonicController",reloadOnSearch:!1}).when("/podcasts",{templateUrl:"podcasts/podcasts.html",controller:"PodcastController"}).when("/archive",{templateUrl:"archive/archive.html",controller:"ArchiveController"}).when("/archive/:artist",{templateUrl:"archive/archive.html",controller:"ArchiveController"}).when("/archive/:artist/:album",{templateUrl:"archive/archive.html",controller:"ArchiveController"}).otherwise({redirectTo:"/index"})}]).config(["$httpProvider",function(e){e.interceptors.push(authenticationInterceptor),e.interceptors.push(loadingInterceptor)}]),authenticationInterceptor.$inject=["$rootScope","$location","$q","globals"],loadingInterceptor.$inject=["Loading"],angular.module("jamstash.settings.controller",["jamstash.settings.service","jamstash.persistence"]).controller("SettingsController",["$rootScope","$scope","$location","utils","globals","json","notifications","persistence","subsonic",function(t,s,n,e,o,i,r,a,l){t.hideQueue(),s.settings=o.settings,s.Timeouts=[{id:1e4,name:10},{id:2e4,name:20},{id:3e4,name:30},{id:4e4,name:40},{id:5e4,name:50},{id:6e4,name:60},{id:9e4,name:90},{id:12e4,name:120}],s.Protocols=["json","jsonp"],s.Themes=["Default","Dark"],s.SearchTypes=o.SearchTypes,s.Layouts=o.Layouts,s.$watch("settings.HideAZ",function(){o.settings.HideAZ?$("#AZIndex").hide():$("#AZIndex").show()}),s.reset=function(){a.deleteSettings(),s.loadSettings()},s.save=function(){""!==s.settings.Password&&"enc:"!=o.settings.Password.substring(0,4)&&(s.settings.Password="enc:"+e.HexEncode(s.settings.Password)),0!=s.settings.Server.indexOf("http://")&&0!=s.settings.Server.indexOf("https://")&&(s.settings.Server="http://"+s.settings.Server),s.settings.NotificationSong&&(r.requestPermissionIfRequired(),r.isSupported()||alert("HTML5 Notifications are not available for your current browser, Sorry :(")),s.settings.NotificationNowPlaying&&(r.requestPermissionIfRequired(),r.isSupported()||alert("HTML5 Notifications are not available for your current browser, Sorry :(")),s.settings.SaveTrackPosition?a.saveQueue():(a.deleteTrackPosition(),a.deleteQueue()),s.settings.Theme&&e.switchTheme(o.settings.Theme),s.settings.ShowQueue?t.showQueue():t.hideQueue(),a.saveSettings(s.settings),r.updateMessage("Settings Updated!",!0),s.loadSettings(),""!==o.settings.Server&&""!==o.settings.Username&&""!==o.settings.Password&&l.ping().then(function(e){o.settings.ApiVersion=e.version,n.path("/library").replace(),t.showIndex=!0},function(e){o.settings.ApiVersion=e.version,e=void 0!==e.subsonicError?e.reason+" "+e.subsonicError.message:void 0!==e.httpError?e.reason+" HTTP error "+e.httpError:e.reason,r.updateMessage(e,!0)})},i.getChangeLog(function(e){s.changeLog=e.slice(0,10),o.ChangeLog=e}),s.changeLogShowMore=function(){i.getChangeLog(function(e){s.changeLog=e})},s.setupDemo=function(){e.confirmDelete("Do you want to connect to the Subsonic Demo server?")&&(o.settings.Username="android-guest",o.settings.Password="guest",o.settings.Server="http://demo.subsonic.org",n.path("/library").replace(),t.showIndex=!0)},void 0!==n.search().url&&""===s.settings.Server&&(o.settings.Debug&&console.log("Setting Provided: "+n.search().url),s.settings.Server=n.search().url),void 0!==n.search().u&&""===s.settings.Username&&(o.settings.Debug&&console.log("Setting Provided: "+n.search().u),s.settings.Username=n.search().u)}]),angular.module("jamstash.settings.service",[]).service("globals",function(){this.SearchTypes=[{id:0,name:"Song"},{id:1,name:"Album"},{id:2,name:"Artist"}],this.Layouts=[{id:"grid",name:"Grid"},{id:"list",name:"List"}],this.AlbumSorts=[{id:"default",name:"Default Sort"},{id:"artist",name:"Artist"},{id:"album",name:"Album"},{id:"track",name:"Track"},{id:"createdate desc",name:"Date Added"}],this.settings={Url:"http://jamstash.com/#/archive/",Username:"",Password:"",Server:"",Timeout:2e4,Protocol:"jsonp",ApplicationName:"Jamstash",ApiVersion:"1.6.0",AutoPlaylists:"",AutoPlaylistSize:25,AutoAlbumSize:15,HideAZ:!1,ScrollTitle:!0,NotificationSong:!0,NotificationNowPlaying:!1,SaveTrackPosition:!1,ForceFlash:!1,Theme:"Default",DefaultLibraryLayout:this.Layouts[0],DefaultSearchType:this.SearchTypes[0],DefaultAlbumSort:this.AlbumSorts[0],DefaultArchiveAlbumSort:"date desc",Jukebox:!1,AutoPlay:!0,LoopQueue:!1,Repeat:!1,Debug:!1,EstimateLength:!0,ShowQueue:!1},this.SavedCollections=[],this.Player1="#playdeck_1",this.archiveUrl="https://archive.org/",this.ChangeLog=null,this.Messages=[],this.BaseURL=function(){return this.settings.Server+"/rest"},this.BaseParams=function(){return"u="+this.settings.Username+"&p="+this.settings.Password+"&f="+this.settings.Protocol+"&v="+this.settings.ApiVersion+"&c="+this.settings.ApplicationName},this.BaseJSONParams=function(){return"u="+this.settings.Username+"&p="+this.settings.Password+"&f=json&v="+this.settings.ApiVersion+"&c="+this.settings.ApplicationName}}).factory("json",["$http",function(t){return{getCollections:function(e){t.get("archive/json_collections.json").success(e)},getChangeLog:function(e){t.get("common/json_changelog.json").success(e)}}}]),angular.module("jamstash.model",["jamstash.utils"]).service("model",["utils",function(b){this.Index=function(e,t){this.name=e,this.artist=t},this.Artist=function(e,t){this.id=e,this.name=t},this.Album=function(e,t,s,n,o,i,r,a,l,u,c,d){this.id=e,this.parentid=t,this.name=s,this.artist=n,this.artistId=o,this.coverartthumb=i,this.coverartfull=r,this.date=a,this.starred=l,this.description=u,this.url=c,this.type=d},this.Song=function(e,t,s,n,o,i,r,a,l,u,c,d,g,f,m,p,h,v){this.id=e,this.parentid=t,this.track=s,this.name=n,this.artist=o,this.artistId=i,this.album=r,this.albumId=a,this.coverartthumb=l,this.coverartfull=u,this.duration=c,this.time=""===c?"00:00":b.secondsToTime(c),this.rating=d,this.starred=g,this.suffix=f,this.specs=m,this.url=p,this.position=h,this.selected=!1,this.playing=!1,this.description=v,this.displayName=this.name+" - "+this.album+" - "+this.artist}}]).service("map",["$http","globals","utils","model",function(e,g,a,f){this.mapAlbum=function(e){var t,s=void 0!==e.coverArt?(t=g.BaseURL()+"/getCoverArt.view?"+g.BaseParams()+"&size=160&id="+e.coverArt,g.BaseURL()+"/getCoverArt.view?"+g.BaseParams()+"&id="+e.coverArt):t="images/albumdefault_160.2ae9211e.jpg",n=void 0!==e.starred,o=void 0!==e.title?e.title:e.name,i=e.isDir?"byfolder":"bytag",r=void 0!==e.artist?e.artist.toString():"";return new f.Album(e.id,e.parent,o,r,e.artistId,t,s,a.formatDate(new Date(e.created),"yyyy-MM-dd h:mm a"),n,"","",i)},this.mapAlbums=function(e){var t=[],s=this.mapAlbum;return angular.forEach(e,function(e){t.push(s(e))}),t},this.mapSong=function(e){var t,s="",n="",o="",o=void 0!==e.coverArt?(n=g.BaseURL()+"/getCoverArt.view?"+g.BaseParams()+"&size=45&id="+e.coverArt,g.BaseURL()+"/getCoverArt.view?"+g.BaseParams()+"&id="+e.coverArt):(n="images/albumdefault_60.9e97a703.jpg","images/albumdefault_160.2ae9211e.jpg"),i=void 0===e.description?"":e.description,r=void 0===e.artist?"&nbsp;":e.artist.toString(),a=void 0===e.title?"&nbsp;":e.title.toString(),l=void 0===e.track?"&nbsp;":e.track.toString(),u=void 0!==e.starred,c=(void 0!==e.bitRate&&(s+=e.bitRate+" Kbps"),s+=void 0!==e.transcodedSuffix?", transcoding:"+e.suffix+" > "+e.transcodedSuffix:", "+e.suffix,"ogg"==(t=void 0!==e.transcodedSuffix?e.transcodedSuffix:e.suffix)&&(t="oga"),Math.floor(1e5*Math.random())),c=g.BaseURL()+"/stream.view?"+g.BaseParams()+"&id="+e.id+"&salt="+c;return g.settings.EstimateLength&&(c+="&estimateContentLength=true"),new f.Song(e.id,e.parent,l,a,r,e.artistId,e.album,e.albumId,n,o,e.duration,e.userRating,u,t,s,c,0,i)},this.mapSongs=function(e){var t=[],s=this.mapSong;return angular.forEach(e,function(e){t.push(s(e))}),t},this.mapPlaylist=function(e){return new f.Artist(e.id,e.name)},this.mapPodcast=function(e){var t,s="",n="",o="",o=void 0!==e.coverArt?(n=g.BaseURL()+"/getCoverArt.view?"+g.BaseParams()+"&size=60&id="+e.coverArt,g.BaseURL()+"/getCoverArt.view?"+g.BaseParams()+"&id="+e.coverArt):(n="images/albumdefault_60.9e97a703.jpg","images/albumdefault_160.2ae9211e.jpg"),i=void 0===e.album?"&nbsp;":e.album.toString(),r=void 0===e.artist?"&nbsp;":e.artist.toString(),a=void 0===e.title?"&nbsp;":e.title.toString(),l=void 0===e.description?"":e.description,u=void 0===e.track?"&nbsp;":e.track.toString(),c=void 0!==e.starred,d=(void 0!==e.bitRate&&(s+=e.bitRate+" Kbps"),s+=void 0!==e.transcodedSuffix?", transcoding:"+e.suffix+" > "+e.transcodedSuffix:", "+e.suffix,"ogg"==(t=void 0!==e.transcodedSuffix?e.transcodedSuffix:e.suffix)&&(t="oga"),Math.floor(1e5*Math.random())),d=g.BaseURL()+"/stream.view?"+g.BaseParams()+"&id="+e.streamId+"&salt="+d;return g.settings.EstimateLength&&(d+="&estimateContentLength=true"),new f.Song(e.streamId,e.parent,u,a,r,e.artistId,i,e.albumId,n,o,e.duration,e.userRating,c,t,s,d,0,l)},this.mapPodcasts=function(e){var t=[],s=this.mapPodcast;return angular.forEach(e,function(e){t.push(s(e))}),t}}]),angular.module("jamstash.utils",["jamstash.settings.service"]).service("utils",["$rootScope","globals",function(s,n){this.safeApply=function(e){var t=s.$root.$$phase;"$apply"===t||"$digest"===t?e&&"function"==typeof e&&e():this.$apply(e)},this.setValue=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){n.settings.Debug&&console.log(e)}},this.getValue=function(e){try{var t=localStorage.getItem(e);return""!==t&&void 0!==t&&JSON.parse(t)}catch(e){n.settings.Debug&&console.log(e)}},this.sortDateFunction=function(e,t){return e.date<t.date?1:-1},this.sortArtistFunction=function(e,t){return e.artist.toLowerCase()<t.artist.toLowerCase()?-1:1},this.sortAlbumFunction=function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1},this.sortTrackFunction=function(e,t){return parseInt(e.track)>parseInt(t.track)?-1:1},this.confirmDelete=function(e){return!!window.confirm(e)},this.HexEncode=function(e){for(var t="0123456789abcdef",s=[],n=[],o=0;o<256;o++)s[o]=t.charAt(o>>4)+t.charAt(15&o);for(o=0;o<e.length;o++)n[o]=s[e.charCodeAt(o)];return n.join("")},this.switchTheme=function(e){switch(e.toLowerCase()){case"dark":$("link[data-name=theme]").attr("href","styles/Dark.4ac0ea21.css");break;case"default":$("link[data-name=theme]").attr("href","")}},this.timeToSeconds=function(e){var t,s=e.split(":");switch(s.length){case 1:t=0;break;case 2:t=60*parseInt(s[0])+parseInt(s[1]);break;case 3:t=60*parseInt(s[0])*60+60*parseInt(s[1])+parseInt(s[2])}return t},this.secondsToTime=function(e){for(var t,s=new Array(3600,60,1),n="",o=0;o<s.length;o++)(t=Math.floor(e/s[o]))<1?t="00":t<10&&(t="0"+t),0===o&&"00"===t||(n+=t,o<2&&(n+=":")),e%=s[o];return n},this.formatDate=function(e,t){e=angular.isDate(e)?e:new Date(e);return $.format.date(e,t)},this.logObjectProperties=function(e){$.each(e,function(e,t){var s=e;"object"==typeof t?$.each(t,function(e,t){console.log(s+" > "+e+" : "+t)}):console.log(e+" : "+t)})},this.findKeyForCode=function(s){var n=0;return $.each([{key:"a",code:65},{key:"b",code:66},{key:"c",code:67},{key:"d",code:68},{key:"e",code:69},{key:"f",code:70},{key:"g",code:71},{key:"h",code:72},{key:"i",code:73},{key:"j",code:74},{key:"k",code:75},{key:"l",code:76},{key:"m",code:77},{key:"n",code:78},{key:"o",code:79},{key:"p",code:80},{key:"q",code:81},{key:"r",code:82},{key:"s",code:83},{key:"t",code:84},{key:"u",code:85},{key:"v",code:86},{key:"w",code:87},{key:"x",code:88},{key:"y",code:89},{key:"z",code:90}],function(e,t){t.code===s&&(n=t.key)}),n},this.toHTML={on:function(e){for(var t=[],s=0;s<e.length;)t[s]=e.charCodeAt(s++);return"&#"+t.join(";&#")+";"},un:function(e){return e.replace(/&#(x)?([^;]{1,5});?/g,function(e,t,s){return String.fromCharCode(parseInt(s,t?16:10))})}},this.parseVersionString=function(e){return"string"==typeof e&&(e=e.split("."),{major:parseInt(e[0])||0,minor:parseInt(e[1])||0,patch:parseInt(e[2])||0})},this.checkVersion=function(e,t){return void 0===t||(angular.isObject(e)||(e=this.parseVersionString(e)),void 0!==(t=angular.isObject(t)?t:this.parseVersionString(t)).major&&void 0!==e.major&&e.major>t.major)||void 0!==t.minor&&void 0!==e.minor&&e.minor>t.minor||void 0!==t.patch&&void 0!==e.patch&&e.patch>=t.patch},this.checkVersionNewer=function(e,t){return void 0===t||(angular.isObject(e)||(e=this.parseVersionString(e)),void 0!==(t=angular.isObject(t)?t:this.parseVersionString(t)).major&&void 0!==e.major&&e.major>t.major)||void 0!==t.minor&&void 0!==e.minor&&e.minor>t.minor||void 0!==t.patch&&void 0!==e.patch&&e.patch>t.patch}}]),angular.module("jamstash.page",["jamstash.settings.service","jamstash.utils"]).factory("Page",["$interval","globals","utils",function(e,t,s){var o,i="Jamstash";return{title:function(){return i},setTitle:function(e){return i=e,this},setTitleSong:function(e){return i=void 0!==e.artist&&void 0!==e.name?s.toHTML.un(e.artist)+" - "+s.toHTML.un(e.name):"Jamstash",t.settings.ScrollTitle&&this.scrollTitle(),this},scrollTitle:function(){var t={left:function(e){e.push(e.shift())},right:function(e){e.unshift(e.pop())}},s={text:i,dir:"left",speed:1200},n=s.text.split("");if(n)return n.push(" "),void 0!==o&&e.cancel(o),o=e(function(){var e=t[s.dir];e&&(e(n),i=n.join(""))},s.speed),this}}}]),angular.module("jamstash.loading",[]).value("Loading",{isLoading:!1}),angular.module("jamstash.notifications",["jamstash.player.service","jamstash.utils"]).service("notifications",["$rootScope","$window","$interval","globals","player","utils",function(n,e,s,o,i,r){this.updateMessage=function(e,t){var s;""!==e&&(s=n.Messages.push(e)-1,$("#messages").fadeIn(),t)&&setTimeout(function(){$("#msg_"+s).fadeOut(function(){$(this).remove()})},o.settings.Timeout)},this.requestPermissionIfRequired=function(){this.isSupported()&&!this.hasPermission()&&window.Notify.requestPermission()},this.hasPermission=function(){return!e.Notify.needsPermission()},this.isSupported=function(){return window.Notify.isSupported()},this.showNotification=function(e){var t;this.hasPermission()?(t=new Notify(r.toHTML.un(e.name),{body:r.toHTML.un(e.artist+" - "+e.album),icon:e.coverartthumb,notifyClick:function(){i.nextTrack(),this.close(),n.$apply()}}),s(function(){t.close()},o.settings.Timeout),t.show()):console.log("showNotification: No Permission")}}]),angular.module("jamstash.persistence",["ngLodash","angular-locker","jamstash.settings.service","jamstash.player.service","jamstash.notifications","jamstash.utils"]).config(["lockerProvider",lockerConfig]).service("persistence",persistenceService).value("jamstashVersionChangesets",{versions:[{version:"4.4.5",changeset:function(e){e.DefaultSearchType=0}}]}),lockerConfig.$inject=["lockerProvider"],persistenceService.$inject=["lodash","globals","player","notifications","locker","json","jamstashVersionChangesets","utils"],angular.module("JamStash").controller("AppController",["$scope","$rootScope","$document","$window","$location","$cookieStore","$http","lodash","utils","globals","model","notifications","player","persistence","Page","subsonic","Loading",function(s,n,e,o,t,i,r,a,l,u,c,d,g,f,m,p,h){n.settings=u.settings,n.song=[],n.playingSong=null,n.Messages=[],n.unity=null,s.Page=m,n.loggedIn=function(){return""!==u.settings.Server&&""!==u.settings.Username&&""!==u.settings.Password},n.totalDisplayed=50,n.loadMore=function(){s.totalDisplayed+=50},n.go=function(e){t.path(e)},s.loading=h,$.ajaxSetup({beforeSend:function(){$("#loading").removeClass("ng-hide")},complete:function(){$("#loading").addClass("ng-hide")}}),s.loadSettings=function(){i.get("Settings")&&(f.saveSettings(i.get("Settings")),i.remove("Settings"));var e=f.getSettings();void 0!==e&&(e=a.omit(e,"Url"),a.each(e,function(e,t){u.settings[t]=e})),l.getValue("SavedCollections")&&(u.SavedCollections=l.getValue("SavedCollections").split(",")),l.getValue("DefaultCollection")&&(u.DefaultCollection=l.getValue("DefaultCollection")),u.settings.Debug&&console.log("Loaded Settings: "+JSON.stringify(u.settings,null,2))};var v=!(s.toggleSetting=function(e){var t=e;u.settings[t]?u.settings[t]=!1:u.settings[t]=!0,d.updateMessage(e+" : "+u.settings[t],!0)});$("div.submenu").mouseenter(function(){v=!0}),$("div.submenu").mouseleave(function(){v=!1,$("div.submenu").hide()}),s.toggleSubmenu=function(e,t,s,n){var o=$(e);if("none"!==o.css("display"))o.fadeOut();else{var e=$(t),i=e.offset();e.width(),e.height();switch(s){case"right":o.css({left:i.left+n+"px",top:i.top+"px"}).fadeIn(400);break;case"left":o.css({left:i.left-n+"px",top:i.top+"px"}).fadeIn(400)}setTimeout(function(){!1===v&&$("div.submenu").stop().fadeOut()},1e4)}},s.$watchCollection(function(){return g.queue},function(e){void 0!==e&&0<e.length&&u.settings.ShowQueue&&s.showQueue()}),n.showQueue=function(){$("#SideBar").css("display","block"),$("#right-component").removeClass("lgcolumn_expanded")},n.hideQueue=function(){$("#SideBar").css("display","none"),$("#right-component").addClass("lgcolumn_expanded")},s.toggleQueue=function(){"none"===$("#SideBar").css("display")?n.showQueue():n.hideQueue()},n.showArtists=function(){$("#left-component").css("display",""),$("#right-component").removeClass("lgcolumn_expandedleft")},n.hideArtists=function(){$("#left-component").css("display","none"),$("#right-component").addClass("lgcolumn_expandedleft")},s.toggleArtists=function(){"none"==$("#left-component").css("display")?n.showArtists():n.hideArtists()},s.fancyboxOpenImage=function(e){$.fancybox.open({helpers:{overlay:{css:{background:"rgba(0, 0, 0, 0.15)"}}},hideOnContentClick:!0,type:"image",openEffect:"none",closeEffect:"none",href:e})},$(document).on("click",".message",function(){$(this).remove()}),window.onbeforeunload=function(){if(!u.settings.Debug&&0<g.queue.length)return"You're about to end your session, are you sure?"},n.showIndex=!1,$(document).on("click","message",function(){return $(this).fadeOut(function(){$(this).remove()}),!1}),$(document).keydown(function(e){s.processKeyEvent(e)}),s.scrollToIndex=function(e){return s.processKeyEvent(e),!0},s.processKeyEvent=function(e){if(!(e.isDefaultPrevented()||e.repeat||e.altKey||e.metaKey||e.ctrlKey||e.target&&a.contains(["input","textarea","select"],e.target.tagName.toLowerCase()))){var t=e.key;if(u.settings.Debug&&console.log("Key pressed: "+t),"Esc"==t||"Escape"==t)n.hideQueue();else if(" "==t||"Space"==t)g.togglePause();else if("ArrowLeft"==t||"Left"==t)g.previousTrack();else if("ArrowRight"==t||"Right"==t)g.nextTrack();else if("-"==t||"_"==t)f.saveVolume(g.turnVolumeDown());else if("="==t||"+"==t)f.saveVolume(g.turnVolumeUp());else{if(!/^[a-z]$/i.test(t)||!$("#tabLibrary").is(":visible"))return;t="#"+(t=/^[x-z]$/i.test(t)?"x-z":t).toUpperCase();0<$(t).length&&$("#left-component").stop().scrollTo(t,400)}s.$apply(),e.preventDefault()}},s.scrollToIndexName=function(e){e="#"+e;0<$(e).length&&$("#left-component").stop().scrollTo(e,400)},s.scrollToTop=function(){$("#left-component").stop().scrollTo("#MusicFolders",400)},n.removeSong=function(e,t){e=t.indexOf(e);t.splice(e,1)},s.isActive=function(e){return e===t.path()},n.getSplitPosition=function(e,t){window.alert(t.getBoundingClientRect().left)},s.download=function(t){$.ajax({url:u.BaseURL()+"/getUser.view?"+u.BaseParams()+"&username="+u.settings.Username,method:"GET",dataType:u.settings.Protocol,timeout:u.settings.Timeout,success:function(e){void 0!==e["subsonic-response"].error?d.updateMessage("Error: "+e["subsonic-response"].error.message,!0):!0===e["subsonic-response"].user.downloadRole?o.location.href=u.BaseURL()+"/download.view?"+u.BaseParams()+"&id="+t:d.updateMessage("You do not have permission to Download",!0)}})},s.toggleStar=function(t){p.toggleStar(t).then(function(e){t.starred=e,d.updateMessage("Favorite Updated!",!0)})},s.toTrusted=function(e){return $sce.trustAsHtml(e)},s.loadSettings(),l.switchTheme(u.settings.Theme),u.settings.ShowQueue||n.hideQueue(),s.loggedIn()&&(u.settings.SaveTrackPosition&&(f.loadQueue(),f.loadTrackPosition()),g.setVolume(f.getVolume()))}]),angular.module("jamstash.selectedsongs",["ngLodash"]).service("SelectedSongs",SelectedSongs),SelectedSongs.$inject=["lodash"],angular.module("jamstash.subsonic.controller",["ngLodash","jamstash.subsonic.service","jamstash.player.service","jamstash.persistence","jamstash.breadcrumbs.directive","jamstash.breadcrumbs.service","jamstash.selectedsongs"]).controller("SubsonicController",["$scope","$rootScope","$routeParams","$window","lodash","utils","globals","map","subsonic","notifications","player","persistence","breadcrumbs","SelectedSongs",function(i,t,e,s,n,o,r,a,l,u,c,d,g,f){n.extend(i,{AlbumSort:r.AlbumSorts,autoAlbums:{random:{name:"Random",offset:0},newest:{name:"Recently Added",offset:0},starred:{name:"Starred",offset:0},highest:{name:"Top Rated",offset:0},frequent:{name:"Most Played",offset:0},recent:{name:"Recently Played",offset:0}},itemType:"ss",playlistMenu:[],selectedSongs:f.get(),SelectedAlbumSort:r.settings.DefaultAlbumSort,Server:r.settings.Server,settings:r.settings,addSelectedSongsToQueue:function(){0!==f.get().length&&(c.addSongs(f.get()),u.updateMessage(f.get().length+" Song(s) Added to Queue",!0),f.reset())},addSongToQueue:function(e){c.addSong(e)},playAll:function(){c.emptyQueue().addSongs(i.song).playFirstSong()},playFrom:function(e){e=i.song.slice(e,i.song.length);c.emptyQueue().addSongs(e).playFirstSong()},playSong:function(e){c.emptyQueue().addSong(e).playFirstSong()},selectAll:function(){f.addSongs(i.song)},selectNone:f.reset,toggleSelection:f.toggle}),t.showIndex=!1,i.toggleIndex=function(){t.showIndex=!0,i.showPlaylist=!1,i.showPodcast=!1,i.saveDefaultSection("index")},i.showPlaylist=!1,i.togglePlaylist=function(){t.showIndex=!1,i.showPlaylist=!0,i.showPodcast=!1,i.saveDefaultSection("playlist")},i.showPodcast=!1,i.togglePodcast=function(){t.showIndex=!1,i.showPlaylist=!1,i.showPodcast=!0,i.saveDefaultSection("podcast")},i.saveDefaultSection=function(e){o.setValue("DefaultSection",e,!1)},i.openDefaultSection=function(){switch(o.getValue("DefaultSection")){case"index":t.showIndex=!0;break;case"playlist":i.showPlaylist=!0;break;case"podcast":i.showPodcast=!0}};function m(e){if(void 0!==e)switch(e){case"createdate desc":i.album.sort(o.sortDateFunction);break;case"artist":i.album.sort(o.sortArtistFunction);break;case"album":i.album.sort(o.sortAlbumFunction)}}i.$watch("SelectedAlbumSort.id",function(s,e){if(s!==e)if(0<i.song.length){e=s;if(void 0!==e)switch(e){case"createdate desc":i.song.sort(o.sortDateFunction);break;case"artist":i.song.sort(o.sortArtistFunction);break;case"album":i.song.sort(o.sortAlbumFunction);break;case"track":i.song.sort(o.sortTrackFunction)}}else 0<i.album.length&&(m(s),e=$.map(r.AlbumSorts,function(e,t){if(e.id===s)return t}),r.settings.DefaultAlbumSort=r.AlbumSorts[e])}),i.$watch("SelectedMusicFolder",function(e,t){var s;e!==t&&(e?(s=e.id,d.saveSelectedMusicFolder(e)):d.deleteSelectedMusicFolder(),i.getArtists(s))}),i.rescanLibrary=function(e,t){$.ajax({url:r.BaseURL()+"/getUser.view?"+r.BaseParams()+"&username="+r.settings.Username,method:"GET",dataType:r.settings.Protocol,timeout:r.settings.Timeout,success:function(e){!0===e["subsonic-response"].user.adminRole?$.get(r.settings.Server+"/musicFolderSettings.view?scanNow&"+r.BaseParams()):alert("You are not logged in as an admin user!")}})},i.removeSong=function(e){t.removeSong(e,i.song)},i.songsRemoveSelected=function(){i.song=n.difference(i.song,f.get())},i.getArtists=function(e){var t=i.SelectedMusicFolder,t=(isNaN(e)&&t&&(e=t.id),l.getArtists(e));i.handleErrors(t).then(function(e){i.index=e.index,i.shortcut=e.shortcut},function(e){i.index=[],i.shortcut=[],!0===e.serviceError&&u.updateMessage(e.reason,!0)})},i.refreshArtists=function(){i.SelectedMusicFolder=void 0,i.getArtists(),i.getPlaylists()},i.handleErrors=function(e){return e.then(null,function(e){var t;void 0!==e.subsonicError?t=e.reason+" "+e.subsonicError.message:void 0!==e.httpError?t=e.reason+" HTTP error "+e.httpError:e.serviceError=!0,void 0===e.subsonicError&&void 0===e.httpError||u.updateMessage(t,!0)}),e},i.requestSongs=function(e,t){return i.handleErrors(e).then(function(e){"play"===t?(c.emptyQueue().addSongs(e).playFirstSong(),u.updateMessage(e.length+" Song(s) Added to Queue",!0)):"add"===t?(c.addSongs(e),u.updateMessage(e.length+" Song(s) Added to Queue",!0)):"display"===t&&(i.album=[],i.song=e)},function(e){!0===e.serviceError&&u.updateMessage(e.reason,!0)}),e},i.getDirectory=function(e,t,s,n){var o;"play"===e||"add"===e?(o=l.recursiveGetDirectory(t),i.requestSongs(o,e)):"display"===e&&(o=l.getDirectory(t),i.handleErrors(o).then(function(e){i.album=e.directories,i.song=e.songs,"root"===n?g.reset().push({id:t,name:s}):"forward"===n&&g.push({id:t,name:s}),i.selectedAutoAlbum=null,i.selectedArtist=null,i.selectedAlbum=t,i.selectedAutoPlaylist=null,i.selectedPlaylist=null,i.selectedPodcast=null,"default"!==i.SelectedAlbumSort.id&&m(i.SelectedAlbumSort.id)},function(e){u.updateMessage(e.reason,!0)}))},i.getAlbumListBy=function(e,t){var s=e?i.autoAlbums[e].offset:0,t=("next"===t?s+=Number(r.settings.AutoAlbumSize):("prev"!==t||(s-=Number(r.settings.AutoAlbumSize))<0)&&(s=0),i.autoAlbums[e].offset=s,l.getAlbumListBy(e,s));i.handleErrors(t).then(function(e){i.album=e,"default"!==i.SelectedAlbumSort.id&&m(i.SelectedAlbumSort.id)},function(e){i.album=[],u.updateMessage(e.reason,!0)}),i.song=[],g.reset(),i.selectedAutoAlbum=e,i.selectedArtist=null,i.selectedAlbum=null,i.selectedAutoPlaylist=null,i.selectedPlaylist=null,i.selectedPodcast=null},i.getRandomStarredSongs=function(e){var t=l.getRandomStarredSongs();i.requestSongs(t,e),i.album=[],g.reset(),i.selectedAutoAlbum=null,i.selectedArtist=null,i.selectedAlbum=null,i.selectedAutoPlaylist="starred",i.selectedPlaylist=null,i.selectedPodcast=null},i.getRandomSongs=function(e,t,s){var n=l.getRandomSongs(t,s);i.requestSongs(n,e),isNaN(s)?i.selectedAutoPlaylist=void 0!==t&&""!==t&&"Random"!==t?t:"random":i.selectedAutoPlaylist=s,i.album=[],g.reset(),i.selectedAutoAlbum=null,i.selectedArtist=null,i.selectedAlbum=null,i.selectedPlaylist=null,i.selectedPodcast=null},i.getArtistByTag=function(e){i.selectedAutoAlbum=null,i.selectedArtist=e;e=r.BaseURL()+"/getArtist.view?"+r.BaseParams()+"&id="+e;$.ajax({url:e,method:"GET",dataType:r.settings.Protocol,timeout:r.settings.Timeout,success:function(e){var t=[];void 0!==e["subsonic-response"].artist?(0<e["subsonic-response"].artist.album.length?t=e["subsonic-response"].artist.album:t[0]=e["subsonic-response"].artist.album,l.content.album=[],l.song=[],angular.forEach(t,function(e){l.content.album.push(a.mapAlbum(e))}),i.$apply()):u.updateMessage("No Albums Returned :(",!0)}})},i.getAlbumByTag=function(e){l.getAlbumByTag(e).then(function(e){i.album=e.album,i.song=e.song,i.BreadCrumbs=e.breadcrumb,i.selectedAutoAlbum=e.selectedAutoAlbum,i.selectedArtist=e.selectedArtist,i.selectedPlaylist=e.selectedPlaylist})},i.search=function(e,t){e&&0<e.length&&(e=l.search(e,t),i.handleErrors(e).then(function(e){0===t?(i.song=e,i.album=[]):1===t?(i.song=[],i.album=e):2===t&&(i.song=[],i.album=[],i.shortcut=e),g.reset()},function(e){!0===e.serviceError&&u.updateMessage(e.reason,!0)}))},i.toggleAZ=function(){i.toggleSubmenu("#submenu_AZIndex","#AZIndex","right",44)},i.getPlaylists=function(){var e=l.getPlaylists();i.handleErrors(e).then(function(e){i.playlists=e.playlists,i.playlistsPublic=e.playlistsPublic},function(){i.playlists=[],i.playlistsPublic=[]})},i.getPlaylist=function(t,e){var s=l.getPlaylist(e);i.requestSongs(s,t).then(function(e){"display"===t&&u.updateMessage(e.length+" Song(s) in Playlist",!0)}),i.song=[],i.album=[],g.reset(),i.selectedAutoAlbum=null,i.selectedArtist=null,i.selectedAlbum=null,i.selectedAutoPlaylist=null,i.selectedPlaylist=e,i.selectedPodcast=null},i.newPlaylist=function(){var e=s.prompt("Choose a name for your new playlist.","");null!==e&&""!==e&&"null"!==e&&(e=l.newPlaylist(e),i.handleErrors(e).then(function(){i.getPlaylists()}))},i.deletePlaylist=function(){var e;i.selectedPlaylist?s.confirm("Are you sure you want to delete the selected playlist?")&&(e=l.deletePlaylist(i.selectedPlaylist),i.handleErrors(e).then(function(){i.getPlaylists()})):u.updateMessage("Please select a playlist to delete.")},i.addToPlaylist=function(e){0===f.get().length?u.updateMessage("Please select a song to add to that playlist."):(e=l.addToPlaylist(e,f.get()),i.handleErrors(e).then(function(){f.reset(),u.updateMessage("Playlist Updated!",!0)}))},i.savePlaylist=function(){var e;i.selectedPlaylist?(e=l.savePlaylist(i.selectedPlaylist,i.song),i.handleErrors(e).then(function(){i.getPlaylist("display",i.selectedPlaylist),u.updateMessage("Playlist Updated!",!0)})):u.updateMessage("Please select a playlist to save.")},i.loadPlaylistsForMenu=function(){var e=l.getPlaylists();i.handleErrors(e).then(function(e){i.playlistMenu=e.playlists.concat(e.playlistsPublic),i.toggleSubmenu("#submenu_AddToPlaylist","#action_AddToPlaylist","left",124)},function(e){u.updateMessage(e.reason,!0)})},i.getGenres=function(){var e=l.getGenres();i.handleErrors(e).then(function(e){i.Genres=e},function(){i.Genres=[]})},i.$watch("selectedGenre",function(e,t){e&&e!==t&&(i.genrePlaylists=n(i.genrePlaylists).push(e).uniq().value(),d.saveSelectedGenreNames(i.genrePlaylists))}),i.loadGenrePlaylists=function(){i.genrePlaylists=d.loadSelectedGenreNames()},i.deleteGenrePlaylist=function(t){n.remove(i.genrePlaylists,function(e){return e===t}),d.deleteSelectedGenreNames(),d.saveSelectedGenreNames(i.genrePlaylists)},i.getPodcasts=function(){var e=l.getPodcasts();i.handleErrors(e).then(function(e){i.podcasts=e},function(){i.podcasts=[]})},i.getPodcast=function(e,t){var s=l.getPodcast(t);i.requestSongs(s,e),i.song=[],i.album=[],g.reset(),i.selectedAutoAlbum=null,i.selectedArtist=null,i.selectedAlbum=null,i.selectedAutoPlaylist=null,i.selectedPlaylist=null,i.selectedPodcast=t},i.getMusicFolders=function(){var e=l.getMusicFolders();i.handleErrors(e).then(function(e){i.MusicFolders=e;var t=d.getSelectedMusicFolder();t&&-1!==n.findIndex(e,{id:t.id})&&(i.SelectedMusicFolder=t)})},i.dragStart=function(e,t){t.item.data("start",t.item.index())},i.dragEnd=function(e,t){var s=t.item.data("start"),t=t.item.index();i.song.splice(t,0,i.song.splice(s,1)[0])},i.searching={query:"",typeId:r.settings.DefaultSearchType,types:r.SearchTypes},i.genrePlaylists=[],i.MusicFolders=[],i.getMusicFolders(),i.getArtists(),i.getPlaylists(),i.getGenres(),i.loadGenrePlaylists(),i.getPodcasts(),i.openDefaultSection(),e.artistId&&e.albumId?i.getAlbumByTag(e.albumId):e.artistId&&i.getAlbums(e.artistId)}]),angular.module("jamstash.subsonic.service",["ngLodash","jamstash.settings.service","jamstash.model"]).service("subsonic",subsonicService),subsonicService.$inject=["$http","$q","lodash","globals","map"],angular.module("jamstash.breadcrumbs.service",["ngLodash"]).factory("breadcrumbs",["lodash",function(e){var s=[],n={get:function(){return s},push:function(e){e={id:e.id,name:e.name};return s.push(e),n},popUntil:function(t){return e.find(s,function(e){return o(e,t)})&&(s=e.dropRightWhile(s,function(e){return!o(e,t)})),n},reset:function(){return s=[],n}};function o(e,t){return e.id===t.id&&e.name===t.name}return n}]),angular.module("jamstash.breadcrumbs.directive",["ngLodash","jamstash.breadcrumbs.service"]).directive("jamstashBreadcrumbs",["lodash","breadcrumbs","subsonic","notifications",function(e,n,o,i){var t={controller:s,controllerAs:"vm",restrict:"E",templateUrl:"subsonic/breadcrumbs-directive/breadcrumbs-directive.html",replace:!0};function s(s,e){e.extend(this,{getBreadcrumbs:n.get,displaySongs:function(t){var e=o.getDirectory(t.id);s.handleErrors(e).then(function(e){s.album=e.directories,s.song=e.songs,n.popUntil(t),s.selectedAutoAlbum=null,s.selectedArtist=null,s.selectedAlbum=t.id,s.selectedAutoPlaylist=null,s.selectedPlaylist=null,s.selectedPodcast=null,"default"!==s.SelectedAlbumSort.id&&s.sortSubsonicAlbums(s.SelectedAlbumSort.id)},function(e){i.updateMessage(e.reason,!0)})}})}return s.$inject=["$scope","lodash"],t}]),angular.module("jamstash.archive.controller",["jamstash.archive.service","jamstash.selectedsongs"]).controller("ArchiveController",["$scope","$rootScope","$location","$routeParams","$http","$timeout","utils","globals","model","notifications","player","archive","json","SelectedSongs",function(n,t,e,s,o,i,r,a,l,u,c,d,g,f){n.settings=a.settings,n.itemType="archive",t.song=[],n.Protocol="jsonp",n.artist=[],n.album=[],n.selectedArtist=null,n.selectedAlbum=null,n.selectedSongs=[],n.SavedCollections=a.SavedCollections,n.AllArtists=[],n.loadedCollection=!1,n.writeSavedCollection=function(){r.setValue("SavedCollections",n.SavedCollections.join(),!1),a.SavedCollections=n.SavedCollections},n.addSavedCollection=function(e){-1==n.SavedCollections.indexOf(e)&&(n.SavedCollections.push(e),n.writeSavedCollection(),e=n.AllArtists.indexOf(e),n.AllArtists.splice(e,1))},n.deleteSavedCollection=function(e){n.SavedCollections.splice(e,1),n.writeSavedCollection()},n.setupDemoCollections=function(){angular.forEach(["YonderMountainStringBand","GreenskyBluegrass"],function(e,t){-1==n.SavedCollections.indexOf(e)&&n.SavedCollections.push(e)})},n.selectedArchiveAlbumSort=a.settings.DefaultArchiveAlbumSort,n.ArchiveAlbumSort=["addeddate desc","addeddate asc","avg_rating desc","avg_rating asc","createdate desc","createdate asc","date desc","date asc","downloads desc","downloads asc","num_reviews desc","num_reviews asc","publicdate desc","publicdate asc","stars desc","stars asc"],n.$watch("selectedArchiveAlbumSort",function(e,t){r.getValue("AlbumSort")!=e&&(void 0!==e?(r.setValue("AlbumSort",e,!0),a.settings.DefaultArchiveAlbumSort=e):r.setValue("AlbumSort",null,!0),n.getAlbums(n.selectedArtist))}),n.getYears=function(e){var t=(new Date).getFullYear(),s=[];for(e=e||1950;e<=t;)s.push(e++);return s},n.Years=n.getYears(),n.filter={Year:"",Source:"",Description:""},n.filterSave=function(){n.selectedArtist&&n.getAlbums(n.selectedArtist,n.filter)},n.getArtists=function(e){var t=$("#Artists").val(),s=$("#Collections option:selected").text();(e||3<=t.length)&&d.getArtists(t,s).then(function(e){n.AllArtists=e.artist,n.loadedCollection=!0})},n.getAlbums=function(e){d.getAlbums(e,n.filter).then(function(e){n.song=e.song,n.album=e.album,n.selectedArtist=e.selectedArtist,n.BreadCrumbs=e.breadcrumb})},n.getSongs=function(e,t){d.getSongs(e,t).then(function(e){n.album=e.album,n.song=e.song,n.selectedAlbum=e.selectedAlbum,n.BreadCrumbs=e.breadcrumb,i(function(){$.fancybox.update()})})},n.scrollToTop=function(){$("#Artists").stop().scrollTo("#auto",400)},n.selectAll=function(){f.addSongs(n.song)},n.addSelectedSongsToQueue=function(){0!==f.get().length&&(c.addSongs(f.get()),u.updateMessage(f.get().length+" Song(s) Added to Queue",!0),f.reset())},n.toggleSelection=function(e){f.toggle(e)},n.selectNone=function(){f.reset()},n.playAll=function(){c.emptyQueue().addSongs(n.song).playFirstSong()},n.playFrom=function(e){e=n.song.slice(e,n.song.length);c.emptyQueue().addSongs(e).playFirstSong()},n.addSongToQueue=function(e){c.addSong(e)},n.playSong=function(e){c.emptyQueue().addSong(e).playFirstSong()},n.removeSong=function(e){t.removeSong(e,n.song)},n.toggleStar=function(e){},n.getAlbums(),s.artist&&(s.album?n.getSongs(s.album):n.getAlbums(s.artist),n.addSavedCollection(s.artist))}]),angular.module("jamstash.archive.service",["jamstash.settings.service","jamstash.model","jamstash.notifications","jamstash.player.service"]).factory("archive",["$rootScope","$http","$q","$sce","globals","model","utils","map","notifications","player",function(e,t,o,d,g,f,m,s,l,u){var c={artist:[],album:[],song:[],breadcrumb:[],selectedArtist:null,selectedAlbum:null,selectedGenre:null,selectedArchiveAlbumSort:"date desc"},p={mapAlbum:function(e){var t=g.archiveUrl+"details/"+e.identifier,s=5==parseInt(e.avg_rating),n=void 0===e.title?"&nbsp;":e.title.toString(),o=void 0===e.identifier?"&nbsp;":e.identifier.toString(),i=void 0===e.collection[0]?"&nbsp;":e.collection[0].toString(),r=void 0===e.source?"&nbsp;":e.source.toString(),a=void 0===e.date?"&nbsp;":e.date.toString(),l=void 0===e.publisher?"&nbsp;":e.publisher.toString(),u=void 0===e.avg_rating?"&nbsp;":e.avg_rating.toString(),c=void 0===e.downloads?"&nbsp;":e.downloads.toString(),r=(r=(r="<b>Source</b>: "+r+"<br />")+("<b>Date</b>: "+a+"<br />")+("<b>Transferer</b>: "+l+"<br />"))+("<b>Rating</b>: "+u+"<br />")+("<b>Downloads</b>: "+c+"<br />");return new f.Album(o,null,n,i,"","images/albumdefault_50.ce68bf16.jpg","images/albumdefault_160.2ae9211e.jpg",m.formatDate(new Date(e.publicdate),"yyyy-MM-dd h:mm a"),s,d.trustAsHtml(r),t)},mapSong:function(e,t,s,n,o,i){var r="";if("VBR MP3"==t.format)return s="http://"+s+n+e,r=void 0===t.bitrate||void 0===t.format?"&nbsp;":t.bitrate+"kbps, "+t.format.toLowerCase(),void 0===t.track||t.track,n=void 0===t.title?"&nbsp;":t.title,e=void 0===t.length?"&nbsp;":m.timeToSeconds(t.length),new f.Song(t.md5,o,t.track,n,t.creator,"",t.album,"",i,i,e,"","","mp3",r,s,0,"")},getArtists:function(e){var t=o.defer();g.settings.Debug&&console.log("LOAD ARCHIVE.ORG COLLECTIONS");var s=(s=g.archiveUrl+"advancedsearch.php?q=")+(""!==e?"mediatype:(collection) AND identifier:("+e+")":"collection:(collection)")+"&fl[]=identifier&sort[]=&sort[]=&sort[]=&rows=50&page=1&output=json";return $.ajax({url:s,method:"GET",dataType:g.settings.Protocol,timeout:g.settings.Timeout,success:function(e){0<e.response.docs.length?(e=e.response.docs,c.artist=[],angular.forEach(e,function(e,t){c.artist.push(e.identifier)})):l.updateMessage("Sorry :(",!0),t.resolve(c)}}),t.promise},getAlbums:function(e,t){var s,n=o.defer();return e?(s=g.archiveUrl+"advancedsearch.php?q=",s+=""!==e?"collection:("+(c.selectedArtist=e)+") AND format:(MP3)":c.selectedArtist?"collection:("+(e=c.selectedArtist)+") AND format:(MP3)":"collection:("+e+")",c.breadcrumb=[],c.breadcrumb.push({type:"artist",id:e,name:e}),t.Source&&(s+=" AND source:("+t.Source+")"),t.Year&&parseInt(t.Year)&&(s+=" AND year:("+t.Year+")"),t.Description&&(s+=" AND description:("+t.Description+")"),c.selectedArtist&&(s+="&sort[]="+g.settings.DefaultArchiveAlbumSort),s+="&fl[]=avg_rating,collection,date,description,downloads,headerImage,identifier,publisher,publicdate,source,subject,title,year&rows=50&page=1&output=json",$.ajax({url:s,method:"GET",dataType:g.settings.Protocol,timeout:g.settings.Timeout,success:function(e){0<e.response.docs.length?(e=e.response.docs,c.album=[],c.song=[],angular.forEach(e,function(e,t){c.album.push(p.mapAlbum(e))}),l.updateMessage(c.album.length+" Items Returned",!0)):l.updateMessage("Sorry :(",!0),n.resolve(c)},error:function(){l.updateMessage("Archive.org service down :(")}})):n.resolve(c),n.promise},getSongs:function(e,r){var a=o.defer();return e?(c.selectedAlbum=e,0<c.breadcrumb.length&&c.breadcrumb.splice(1,c.breadcrumb.length-1),c.breadcrumb.push({type:"album",id:e,name:e}),e=g.archiveUrl+"details/"+e+"?output=json",$.ajax({url:e,method:"GET",dataType:g.settings.Protocol,timeout:g.settings.Timeout,success:function(e){var t,s="",n=e.server,o=e.dir,i=e.metadata.identifier[0],e=(void 0!==e.misc.image&&(s=e.misc.image),e.files);"add"==r?(angular.forEach(e,function(e,t){t=p.mapSong(t,e,n,o,i,s);t&&u.queue.push(t)}),l.updateMessage(Object.keys(e).length+" Song(s) Added to Queue",!0)):"play"==r?(u.queue=[],angular.forEach(e,function(e,t){t=p.mapSong(t,e,n,o,i,s);t&&u.queue.push(t)}),t=u.queue[0],u.play(t),l.updateMessage(Object.keys(e).length+" Song(s) Added to Queue",!0)):(c.album=[],c.song=[],angular.forEach(e,function(e,t){t=p.mapSong(t,e,n,o,i,s);t&&c.song.push(t)})),a.resolve(c)}})):a.resolve(c),a.promise}};return p}]),angular.module("jamstash.player.controller",["jamstash.player.service","jamstash.player.directive","jamstash.repeat.directive"]).controller("PlayerController",["$scope","player","globals",function(e,t,s){e.getPlayingSong=t.getPlayingSong,e.settings=s.settings,e.playerSettings=t.settings,e.play=t.togglePause,e.pause=t.togglePause,e.previousTrack=t.previousTrack,e.nextTrack=t.nextTrack}]),angular.module("jamstash.player.directive",["jamstash.player.service","jamstash.settings.service","jamstash.subsonic.service","jamstash.notifications","jamstash.persistence","jamstash.page"]).directive("jplayer",["$interval","player","globals","subsonic","notifications","persistence","Page",function(o,i,r,a,l,u,c){return{restrict:"EA",template:"<div></div>",link:function(s,e){$(".PlayTrack").on("click",function(e){e.preventDefault(),$(this).hide(),$(".PauseTrack").show()}),$(".PauseTrack").on("click",function(e){e.preventDefault(),$(this).hide(),$(".PlayTrack").show()});var t,n=e.children("div"),e="html,flash";r.settings.ForceFlash&&(e="flash,html");s.$watch(function(){return i.getPlayingSong()},function(e){var t;void 0!==e&&(s.currentSong=e,c.setTitleSong(e),$.fancybox.isOpen&&s.fancyboxOpenImage(e.coverartfull),t={},["oga","m4a","mp3","flac"].includes(e.suffix)&&(t[e.suffix]=e.url,t.duration=e.duration),n.jPlayer("setMedia",t),n.jPlayer("mute",!1),r.settings.Jukebox&&a.addToJukebox(e),!0===i.loadSong||r.settings.Jukebox?(i.loadSong=!1,s.revealControls(),n.jPlayer("pause",e.position)):(n.jPlayer("play"),r.settings.NotificationSong&&l.showNotification(e)))}),s.$watch(function(){return i.restartSong},function(e){!0===e&&(n.jPlayer("play",0),s.scrobbled=!1,i.restartSong=!1)}),s.$watch(function(){return i.pauseSong},function(e){n.jPlayer(e?"pause":"play"),r.settings.Jukebox&&a.sendToJukebox(e?"stop":"start")}),s.$watch(function(){return i.getVolume()},function(e){n.jPlayer("volume",e),r.settings.Debug&&console.log("Volume: "+Math.round(100*e)+"%")}),s.$watch(function(){return r.settings.SaveTrackPosition},function(e){!0===e&&s.startSavePosition()}),s.revealControls=function(){$("#playermiddle").css("visibility","visible"),$("#songdetails").css("visibility","visible")},s.startSavePosition=function(){r.settings.SaveTrackPosition&&(0!==t&&o.cancel(t),t=o(function(){var e=n.data("jPlayer");r.settings.SaveTrackPosition&&void 0!==s.currentSong&&void 0!==e&&0<e.status.currentTime&&!1===e.status.paused&&($("#action_SaveProgress").fadeTo("slow",0).delay(500).fadeTo("slow",1).delay(500).fadeTo("slow",0).delay(500).fadeTo("slow",1),s.currentSong.position=e.status.currentTime,u.saveTrackPosition(s.currentSong),u.saveQueue())},3e4))},t=0,s.currentSong={},s.scrobbled=!1,$.jPlayer.timeFormat.showHour=!0,n.jPlayer({swfPath:"bower_components/jplayer/dist/jplayer/jquery.jplayer.swf",wmode:"window",solution:e,supplied:"mp3, oga, m4a, flac",preload:"auto",errorAlerts:!1,warningAlerts:!1,cssSelectorAncestor:"#player",cssSelector:{play:".PlayTrack",pause:".PauseTrack",seekBar:"#audiocontainer .scrubber",playBar:"#audiocontainer .progress",mute:"#action_Mute",unmute:"#action_UnMute",volumeMax:"#action_VolumeMax",currentTime:"#played",duration:"#duration"},setmedia:function(){s.scrobbled=!1},play:function(){s.revealControls()},ended:function(){i.isLastSongPlaying()&&r.settings.AutoPlay?a.getRandomSongs().then(function(e){i.addSongs(e).songEnded(),l.updateMessage("Auto Play Activated...",!0)}):i.songEnded(),s.$apply()},timeupdate:function(e){var t=e.jPlayer.status.currentPercentAbsolute,e=!e.jPlayer.status.paused;!s.scrobbled&&30<t&&e&&(r.settings.Debug&&console.log("Scrobbling - Percent Played: "+t),a.scrobble(s.currentSong),s.scrobbled=!0)},error:function(e){var t=e.jPlayer.status.currentTime;t&&n.jPlayer("play",t),r.settings.Debug&&(console.log("jPlayer error: ",e.jPlayer.error),console.log("Stream interrupted, retrying from position: ",t))}}),s.startSavePosition(),$("#audiocontainer .scrubber").mouseover(function(){$(".audiojs .scrubber").stop().animate({height:"8px"})}),$("#audiocontainer .scrubber").mouseout(function(){$(".audiojs .scrubber").stop().animate({height:"4px"})})}}}]),angular.module("jamstash.player.service",["ngLodash"]).factory("player",["lodash",function(t){var s=1,n={_playingIndex:-1,_playingSong:void 0,queue:[],pauseSong:!1,restartSong:!1,loadSong:!1,settings:{repeat:"none",repeatValues:["queue","song","none"]},play:function(e){var t=n.indexOfSong(e);n._playingIndex=void 0!==t?t:-1,n._playingSong===e?n.restart():n._playingSong=e},togglePause:function(){n.pauseSong?n.pauseSong=!1:n.pauseSong=!0},playFirstSong:function(){n._playingIndex=0,n.play(n.queue[0])},load:function(e){n.loadSong=!0,n.play(e)},restart:function(){n.restartSong=!0},songEnded:function(){"song"===n.settings.repeat?n.restart():!0===n.isLastSongPlaying()?"queue"===n.settings.repeat&&n.playFirstSong():n.nextTrack()},nextTrack:function(){var e=n.indexOfSong(n._playingSong);n._playingIndex=void 0!==e?e:-1,n._playingIndex+1<n.queue.length&&(e=n.queue[n._playingIndex+1],n._playingIndex++,n.play(e))},previousTrack:function(){var e=n.indexOfSong(n._playingSong);n._playingIndex=void 0!==e?e:-1,0<n._playingIndex-1?(e=n.queue[n._playingIndex-1],n._playingIndex--,n.play(e)):0<n.queue.length&&n.playFirstSong()},emptyQueue:function(){return n.queue=[],n},shuffleQueue:function(){var e=t.without(n.queue,n._playingSong),e=t.shuffle(e);return void 0!==n._playingSong&&(e.unshift(n._playingSong),n._playingIndex=0),n.queue=e,n},addSong:function(e){return n.queue.push(e),n},addSongs:function(e){return n.queue=n.queue.concat(e),n},removeSong:function(e){e=n.queue.indexOf(e);return n.queue.splice(e,1),n},removeSongs:function(e){return n.queue=t.difference(n.queue,e),n},reorderQueue:function(e,t){var s;return e<0||e>=n.queue.length||t<0||t>=n.queue.length||(s=n.queue[e],n.queue.splice(e,1),n.queue.splice(t,0,s)),n},getPlayingSong:function(){return n._playingSong},isLastSongPlaying:function(){return n._playingIndex+1===n.queue.length},indexOfSong:function(e){for(var t=n.queue.length-1;0<=t;t--)if(angular.equals(e,n.queue[t]))return t},turnVolumeUp:function(){var e=s;return(1<e+.1||e<0)&&(e=.9),e+=.1,s=Math.round(100*e)/100,e},turnVolumeDown:function(){var e=s;return(1<e||e-.1<0)&&(e=.1),e-=.1,s=Math.round(100*e)/100,e},getVolume:function(){return s},setVolume:function(e){return 1<e?e=1:e<0&&(e=0),s=Math.round(100*e)/100,n}};return n}]),angular.module("jamstash.repeat.directive",["jamstash.notifications"]).directive("jamstashRepeat",["notifications",function(e){return{restrict:"E",templateUrl:"player/repeat-directive/repeat-directive.html",replace:!0,scope:{selectedValue:"=",values:"="},link:function(t){t.$watch("selectedValue",function(e){t.selectedIndex=t.values.indexOf(e)}),t.cycleRepeat=function(){t.selectedIndex=(t.selectedIndex+1)%t.values.length,t.selectedValue=t.values[t.selectedIndex],e.updateMessage("Repeat "+t.selectedValue,!0)}}}}]),angular.module("jamstash.queue.controller",["ngLodash","jamstash.player.service","jamstash.subsonic.service","jamstash.selectedsongs","jamstash.notifications","ui.sortable"]).controller("QueueController",QueueController),QueueController.$inject=["$scope","lodash","player","SelectedSongs","subsonic","notifications"],angular.module("JamStash").filter("capitalize",function(){return function(e,t){return e.substring(0,1).toUpperCase()+e.substring(1)}}).filter("musicfolder",function(){return function(e,t){return e.slice(1,e.length)}}).filter("capitalize",function(){return function(e,t){return e.substring(0,1).toUpperCase()+e.substring(1)}}),angular.module("JamStash").directive("sortable",function(){return{link:function(e,t,s){t.sortable({start:e.dragStart,update:e.dragEnd}),t.disableSelection()}}}).directive("fancybox",["$compile",function(o){return{restrict:"A",replace:!1,link:function(s,n,e){s.fancyboxOpen=function(){var e=angular.element(n.html()),t=o(e);$.fancybox.open(e),t(s)}}}}]).directive("songpreview",["$compile","subsonic",function(e,n){return{restrict:"E",templateUrl:"common/songs.html",replace:!1,scope:{song:"@"},link:function(t,s,e){n.getSongTemplate(function(e){t.song=e,$.fancybox.open(s)})}}}]).directive("ngDownload",["$compile",function(o){return{restrict:"E",scope:{data:"="},link:function(e,t,s){function n(){return URL.createObjectURL(new Blob([JSON.stringify(e.data)],{type:"application/json"}))}t.append(o('<a class="button" download="backup.json"href="'+n()+'">Download</a>')(e)),e.$watch(e.data,function(){t.children()[0].href=n()})}}}]).directive("stopEvent",["lodash",function(n){return{restrict:"A",link:function(e,t,s){s&&s.stopEvent&&n.forEach(s.stopEvent.split(","),function(e){t.bind(e,function(e){e.stopPropagation()})})}}}]).directive("ngEnter",function(){return function(t,e,s){e.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(s.ngEnter)}),e.preventDefault())})}}).directive("checkImage",function(){return{link:function(e,t,s){t.bind("error",function(){t.attr("src","/images/albumdefault_160.2ae9211e.jpg")})}}});